---
phase: 33-v0-1-tech-debt-resolution
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - docs/bv2int.md
  - crates/driver/src/cargo_verify.rs
  - crates/analysis/src/bv2int.rs
  - .planning/phases/18-bv2int-optimization/18-VERIFICATION.md
autonomous: true
requirements:
  - PERF-05
  - PERF-06
must_haves:
  truths:
    - "docs/bv2int.md exists at project root (not in .planning/) covering all 5 required sections"
    - "cargo_verify.rs --help text expanded with bv2int use cases and limitations"
    - "bv2int.rs module doc comments expanded with eligibility criteria"
    - "Phase 18 VERIFICATION.md updated from human_needed (4/5) to passed (5/5)"
  artifacts:
    - path: "docs/bv2int.md"
      provides: "Standalone user-facing reference for bv2int optimization"
      contains: "When to Use"
    - path: ".planning/phases/18-bv2int-optimization/18-VERIFICATION.md"
      provides: "Updated verification status"
      contains: "status: passed"
  key_links:
    - from: "docs/bv2int.md"
      to: "crates/analysis/src/bv2int.rs"
      via: "references IneligibilityReason variants by name"
      pattern: "IneligibilityReason"
    - from: "docs/bv2int.md"
      to: "crates/driver/src/cargo_verify.rs"
      via: "documents --bv2int flag and RUST_FV_BV2INT env var"
      pattern: "RUST_FV_BV2INT"
---

<objective>
Create `docs/bv2int.md` as a standalone user-facing reference document for the bv2int optimization, expand inline docs in `cargo_verify.rs` and `bv2int.rs`, and update Phase 18 VERIFICATION.md to `passed` (5/5).

Purpose: Close the Phase 18 tech debt item — the product decision was made to create both a standalone docs file AND improve inline docs. This is the implementation of that decision.

Output: `docs/bv2int.md` (1-2 pages, short reference format), expanded inline docs in two source files, Phase 18 VERIFICATION.md at `passed` status.
</objective>

<execution_context>
@/Users/alexanderfedin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/alexanderfedin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/phases/18-bv2int-optimization/18-VERIFICATION.md

<interfaces>
<!-- Key content already in the codebase to reference when writing docs -->
<!-- Source: crates/driver/src/cargo_verify.rs lines 486-529 (--help text) -->
<!-- Source: crates/analysis/src/bv2int.rs lines 1-9 (module doc) -->

From crates/analysis/src/bv2int.rs (existing module doc + types):
```rust
// EncodingMode enum: Bitvector, Integer
// IneligibilityReason variants: ContainsBitwiseOps, ContainsShiftOps, ContainsPointerArithmetic, etc.
// is_bv2int_eligible(func: &Function) -> Result<(), IneligibilityReason>
// RUST_FV_BV2INT env var → activates Integer encoding mode
// RUST_FV_BV2INT_REPORT env var → prints per-function timing report
// RUST_FV_BV2INT_THRESHOLD env var → slowdown threshold (default 2.0)
// --bv2int CLI flag
// --bv2int-report CLI flag
// --bv2int-threshold CLI flag
```
</interfaces>
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create docs/bv2int.md and expand inline docs</name>
  <files>docs/bv2int.md
crates/driver/src/cargo_verify.rs
crates/analysis/src/bv2int.rs</files>
  <action>
    Step 1 — Read the existing content first:
    ```bash
    # Read actual --help text and module docs
    cat /Users/alexanderfedin/Projects/hapyy/rust-fv/crates/driver/src/cargo_verify.rs | sed -n '480,535p'
    cat /Users/alexanderfedin/Projects/hapyy/rust-fv/crates/analysis/src/bv2int.rs | head -50
    ```

    Step 2 — Create `docs/` directory if it doesn't exist at project root (NOT in .planning/):
    ```bash
    mkdir -p /Users/alexanderfedin/Projects/hapyy/rust-fv/docs
    ```

    Step 3 — Create `docs/bv2int.md` as a short reference document (1-2 pages). Must include these 5 sections:
    1. **When to Use** — arithmetic-heavy specs (add, sub, mul, div) with no bitwise/shift ops; integer ranges and modular arithmetic; functions where QF_LIA is decidable
    2. **How to Activate** — `RUST_FV_BV2INT=1 cargo verify` OR `cargo verify --bv2int`; mention `--bv2int-report` for timing data
    3. **Known Limitations** — ineligible when function uses `&`, `|`, `^`, `<<`, `>>` (IneligibilityReason variants); soundness: result is UNSAT under both modes (differential testing); no float support
    4. **Performance Characteristics** — when it helps vs. hurts; >2x slowdown triggers warning; configurable threshold
    5. **Environment Variables** — `RUST_FV_BV2INT`, `RUST_FV_BV2INT_REPORT`, `RUST_FV_BV2INT_THRESHOLD` with examples

    Format: scannable reference with code blocks for commands. Not a tutorial — no step-by-step walkthrough. Target: developer who wants to understand when and how to use the flag.

    Step 4 — Expand `bv2int.rs` module doc comment (lines 1-9) to add:
    - Eligibility decision logic (which ops trigger ineligibility)
    - `IneligibilityReason` variants listed with brief descriptions
    - Cross-reference to `docs/bv2int.md`
    Keep existing content, only expand.

    Step 5 — Expand `cargo_verify.rs` --help text for --bv2int (lines ~486-529) to add:
    - One-line summary of when it helps (arithmetic-heavy specs)
    - Note about --bv2int-report for understanding performance impact
    - Reference to docs/bv2int.md for full documentation
    Keep existing flags documentation, only append/expand.

    Step 6 — Run linters:
    ```bash
    cargo clippy -p rust-fv-driver -p rust-fv-analysis 2>&1 | grep -E "^error|^warning"
    cargo fmt -p rust-fv-driver -p rust-fv-analysis -- --check
    ```
  </action>
  <verify>
    <automated>test -f /Users/alexanderfedin/Projects/hapyy/rust-fv/docs/bv2int.md &amp;&amp; grep -c "When to Use" /Users/alexanderfedin/Projects/hapyy/rust-fv/docs/bv2int.md</automated>
  </verify>
  <done>docs/bv2int.md exists at project root with all 5 sections (When to Use, Activation, Known Limitations, Performance, Environment Variables). File is 1-2 pages (300-700 lines). bv2int.rs module doc expanded. cargo_verify.rs --help text expanded.</done>
</task>

<task type="auto">
  <name>Task 2: Update Phase 18 VERIFICATION.md to passed</name>
  <files>.planning/phases/18-bv2int-optimization/18-VERIFICATION.md</files>
  <action>
    Update 18-VERIFICATION.md to reflect that the documentation gap is now resolved:

    1. Change frontmatter `status: human_needed` to `status: passed`
    2. Change `score: 4/5 success criteria verified (5th needs human judgment)` to `score: 5/5 success criteria verified`
    3. Update Truth #5 from `UNCERTAIN` to `VERIFIED`:
       - Evidence: `docs/bv2int.md` created at project root with all 5 required sections; inline docs expanded in bv2int.rs and cargo_verify.rs
    4. Close/remove the `human_verification` frontmatter block (mark as completed)
    5. Update the "Gaps Summary" section to show: "All 5 success criteria now verified. docs/bv2int.md created at project root as per Phase 33 tech debt resolution."
    6. Add a note at the bottom: "Phase 18 tech debt item CLOSED — docs/bv2int.md created, inline docs expanded. 2026-02-27"

    Also update PERF-05 and PERF-06 in the Requirements Coverage table from `PENDING in tracker` to `SATISFIED` since this phase confirms implementation.

    Keep all other content intact.
  </action>
  <verify>
    <automated>grep -n "^status:" /Users/alexanderfedin/Projects/hapyy/rust-fv/.planning/phases/18-bv2int-optimization/18-VERIFICATION.md | head -3</automated>
  </verify>
  <done>18-VERIFICATION.md frontmatter shows `status: passed` and `score: 5/5`. Truth #5 shows VERIFIED with docs/bv2int.md as evidence. The human_verification requirement is closed.</done>
</task>

</tasks>

<verification>
```bash
# Confirm docs file exists with content
test -f /Users/alexanderfedin/Projects/hapyy/rust-fv/docs/bv2int.md && wc -l /Users/alexanderfedin/Projects/hapyy/rust-fv/docs/bv2int.md
# Confirm VERIFICATION.md status
grep "^status:" /Users/alexanderfedin/Projects/hapyy/rust-fv/.planning/phases/18-bv2int-optimization/18-VERIFICATION.md
# Confirm all 5 sections in docs
grep -c "##" /Users/alexanderfedin/Projects/hapyy/rust-fv/docs/bv2int.md
# Confirm no lint regressions
cargo clippy -p rust-fv-driver -p rust-fv-analysis 2>&1 | grep "^error" | wc -l
```
</verification>

<success_criteria>
- `docs/bv2int.md` exists at project root with all 5 required sections
- bv2int.rs and cargo_verify.rs inline docs expanded
- Phase 18 VERIFICATION.md status = `passed`, score = `5/5`
- cargo clippy: 0 new errors, 0 new warnings
</success_criteria>

<output>
After completion, create `.planning/phases/33-v0-1-tech-debt-resolution/33-02-SUMMARY.md`
</output>
