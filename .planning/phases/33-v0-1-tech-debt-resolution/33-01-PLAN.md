---
phase: 33-v0-1-tech-debt-resolution
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - crates/driver/tests/e2e_performance.rs
  - .planning/phases/14-incremental-verification/14-VERIFICATION.md
autonomous: true
requirements:
  - PERF-01
must_haves:
  truths:
    - "All 4 E2E performance tests pass (no #[ignore]) with <1000ms incremental run and >=85% cache hit rate"
    - "Phase 14 VERIFICATION.md status updated from human_needed to passed"
    - "v0.1 milestone audit tech_debt item for Phase 14 is closed"
  artifacts:
    - path: "crates/driver/tests/e2e_performance.rs"
      provides: "E2E performance tests without #[ignore] attribute"
      contains: "e2e_incremental_body_change_under_1s"
    - path: ".planning/phases/14-incremental-verification/14-VERIFICATION.md"
      provides: "Updated verification status"
      contains: "status: passed"
  key_links:
    - from: "crates/driver/tests/e2e_performance.rs"
      to: "tests/e2e-bench/src/lib.rs"
      via: "cargo verify subprocess invocation"
      pattern: "e2e_incremental_body_change_under_1s"
---

<objective>
Run the 4 ignored E2E performance tests for Phase 14 (incremental verification benchmarks), remove `#[ignore]` once they pass, and update Phase 14 VERIFICATION.md from `human_needed` to `passed`.

Purpose: Close the Phase 14 tech debt item in the v0.1 milestone audit — the E2E performance infrastructure is complete (1083-line e2e-bench crate, 571-line test file), the only remaining gap is empirically executing the tests.

Output: Phase 14 VERIFICATION.md at `passed` status (5/5 automated, 0 human-needed).
</objective>

<execution_context>
@/Users/alexanderfedin/.claude/get-shit-done/workflows/execute-plan.md
@/Users/alexanderfedin/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-incremental-verification/14-VERIFICATION.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Run E2E performance tests and remove #[ignore]</name>
  <files>crates/driver/tests/e2e_performance.rs</files>
  <action>
    Step 1 — Verify prerequisites:
    ```bash
    z3 --version
    cargo build -p rust-fv-driver 2>&1 | tail -5
    ```
    If z3 is not installed or cargo build fails, diagnose and fix before proceeding.

    Step 2 — Run the tests with --ignored --nocapture:
    ```bash
    cargo test -p rust-fv-driver --test e2e_performance -- --ignored --nocapture 2>&1
    ```

    Step 3 — Interpret results:
    - If ALL 4 tests pass: remove `#[ignore]` from all 4 test functions (at lines ~185, ~309, ~401, ~501 per research)
    - If a test exceeds 1000ms but is < 2000ms: this is a warning only (may be rustc overhead) — still remove `#[ignore]` if test passes
    - If a test exceeds 2000ms or fails: diagnose the bottleneck (is it rustc compilation time or the verification subsystem?) and fix the underlying issue — do NOT adjust thresholds or keep `#[ignore]`

    Step 4 — After removing `#[ignore]`, verify the tests pass without --ignored:
    ```bash
    cargo test -p rust-fv-driver --test e2e_performance 2>&1
    ```

    Step 5 — Run clippy and fmt:
    ```bash
    cargo clippy -p rust-fv-driver 2>&1 | grep -E "warning|error"
    cargo fmt -p rust-fv-driver -- --check
    ```
  </action>
  <verify>
    <automated>cargo test -p rust-fv-driver --test e2e_performance 2>&1 | tail -5</automated>
  </verify>
  <done>All 4 E2E performance tests pass without `#[ignore]`: e2e_incremental_body_change_under_1s, e2e_no_change_all_cached, e2e_contract_change_transitive, e2e_fresh_flag_bypasses_cache. Incremental run completes in less than 1000ms. Cache hit rate is >= 85% for the body-change test and >= 99% for the no-change test.</done>
</task>

<task type="auto">
  <name>Task 2: Update Phase 14 VERIFICATION.md to passed</name>
  <files>.planning/phases/14-incremental-verification/14-VERIFICATION.md</files>
  <action>
    Update the VERIFICATION.md frontmatter and content to reflect that all human-pending items are now resolved:

    1. Change frontmatter `status: human_needed` to `status: passed`
    2. Change `score: 5/5 must-haves verified` to `score: 5/5 must-haves verified (empirically confirmed)`
    3. Add a re-verification section noting the date and that E2E tests now pass without `#[ignore]`
    4. Update Truth #1 status from `✓ VERIFIED (infrastructure)` to `✓ VERIFIED (empirically confirmed)` with actual test output (timing, cache hit rate from Task 1 output)
    5. Remove or close the `human_verification` frontmatter block (mark as completed)
    6. Add a note: "Phase 14 tech debt item CLOSED — E2E tests pass without #[ignore] as of 2026-02-27"

    Keep all other content intact. Do not restructure the document.
  </action>
  <verify>
    <automated>grep -n "status:" /Users/alexanderfedin/Projects/hapyy/rust-fv/.planning/phases/14-incremental-verification/14-VERIFICATION.md | head -3</automated>
  </verify>
  <done>14-VERIFICATION.md frontmatter shows `status: passed`. The human_verification section is closed. Truth #1 shows empirically confirmed status with actual timing data from Task 1.</done>
</task>

</tasks>

<verification>
```bash
# Confirm tests pass without --ignored
cargo test -p rust-fv-driver --test e2e_performance 2>&1 | tail -5
# Confirm no #[ignore] remains
grep -n "ignore" /Users/alexanderfedin/Projects/hapyy/rust-fv/crates/driver/tests/e2e_performance.rs
# Confirm VERIFICATION.md status
grep "^status:" /Users/alexanderfedin/Projects/hapyy/rust-fv/.planning/phases/14-incremental-verification/14-VERIFICATION.md
```
</verification>

<success_criteria>
- All 4 E2E performance tests pass without `#[ignore]`
- Incremental re-verification completes in less than 1000ms (or diagnosed and fixed if > 2000ms)
- Cache hit rate >= 85% for body-change test, >= 99% for no-change test
- Phase 14 VERIFICATION.md status = `passed`
- cargo clippy: 0 new warnings
</success_criteria>

<output>
After completion, create `.planning/phases/33-v0-1-tech-debt-resolution/33-01-SUMMARY.md`
</output>
