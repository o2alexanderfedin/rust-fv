---
status: complete
phase: v0.3-milestone
source: 13-01-SUMMARY.md, 13-02-SUMMARY.md, 13-03-SUMMARY.md, 13-04-SUMMARY.md, 13-05-SUMMARY.md, 14-01-SUMMARY.md, 14-02-SUMMARY.md, 14-03-SUMMARY.md, 14-04-SUMMARY.md, 15-01-SUMMARY.md, 15-02-SUMMARY.md, 15-03-SUMMARY.md, 16-01-SUMMARY.md, 16-02-SUMMARY.md, 16-03-SUMMARY.md, 17-01-SUMMARY.md, 17-02-SUMMARY.md, 18-01-SUMMARY.md, 18-02-SUMMARY.md, 18-03-SUMMARY.md
started: 2026-02-17T00:00:00Z
updated: 2026-02-18T04:41:00Z
---

## Current Test

[testing complete]

## Tests

### 1. Stdlib contracts auto-load (Phase 13)
expected: Run `cargo verify` on code that uses Vec, Option, or Result. The verification tool loads stdlib contracts automatically â€” no configuration required.
result: pass
evidence: load_default_contracts() in analysis/src/stdlib_contracts/loader.rs; StdlibContractRegistry implements Default; auto-loaded in driver callbacks

### 2. --no-stdlib-contracts disables loading (Phase 13)
expected: `cargo verify --no-stdlib-contracts` runs without loading any standard library contracts.
result: pass
evidence: no_stdlib_contracts: bool field in callbacks.rs; RUST_FV_NO_STDLIB_CONTRACTS env var handled

### 3. Vec verification with contracts (Phase 13)
expected: Vec push proves element-level precision: `vec[old_len] == x` after push.
result: pass
evidence: seq.nth(self.data, old(self.len())) == value in analysis/src/stdlib_contracts/vec.rs

### 4. Option/Result safety with contracts (Phase 13)
expected: option.unwrap() guarded by is_some() check verifies without error.
result: pass
evidence: option_is_some_contract(), option_is_none_contract() in analysis/src/stdlib_contracts/option.rs

### 5. HashMap insert frame condition (Phase 13)
expected: After map.insert(k, v), other existing keys retain their old values.
result: pass
evidence: "forall k != key: self.get(k) == old(self.get(k)) [frame condition]" in hashmap.rs

### 6. First run [OK], second run [SKIP] (Phase 14)
expected: Second run with no changes shows all functions as [SKIP] (cached).
result: pass
evidence: [SKIP] status with "(cached)" in output.rs; cyan bold formatting

### 7. Invalidation reason shown on re-verify (Phase 14)
expected: Changed function shows "[OK] fn_name -- Re-verifying: body changed".
result: pass
evidence: InvalidationReason enum in invalidation.rs with "body changed" / "contract changed" variants

### 8. --verbose shows per-function timing (Phase 14)
expected: `cargo verify --verbose` shows per-function timing; summary line always shown.
result: pass
evidence: output.rs "verbose - If true, show per-function timing"; cargo_verify.rs help text confirms

### 9. Contract change triggers transitive invalidation (Phase 14)
expected: Contract change on utility function re-verifies that function AND all callers.
result: pass
evidence: incremental_contract_change_transitive_invalidation test PASSES in incremental_correctness.rs

### 10. cargo verify clean (Phase 14)
expected: `cargo verify clean` deletes target/verify-cache/ directory.
result: pass
evidence: run_cargo_verify_clean() in cargo_verify.rs; "clean" subcommand dispatch confirmed

### 11. Manual trigger annotation parses (Phase 15)
expected: `#[trigger(f(x))]` annotation parses and overrides auto-inference.
result: pass
evidence: TriggerHint struct in ir.rs; 66 trigger tests pass (parse_trigger_single, parse_trigger_multiple_sets, etc.)

### 12. Bad trigger (arithmetic) is rejected with V015 (Phase 15)
expected: `#[trigger(x + 1)]` produces error V015.
result: pass
evidence: "error[V015]: trigger contains interpreted symbol" in diagnostics.rs; all interpreted symbol tests pass

### 13. --verbose shows trigger info (Phase 15)
expected: `cargo verify --verbose` shows "forall [x]: manual trigger override: { f(x) }".
result: pass
evidence: describe_quantifier_triggers() + format_trigger_sets_for_verbose() in encode_quantifier.rs

### 14. Auto-inference still works without #[trigger] (Phase 15)
expected: Quantifiers without #[trigger] still use auto-inferred triggers.
result: pass
evidence: pub fn infer_triggers() in encode_quantifier.rs; backward-compat test parse_no_trigger_backward_compat passes

### 15. VSCode extension: on-save verification (Phase 16)
expected: Saving a Rust file automatically triggers cargo verify; failures show red squiggles.
result: pass
evidence: onDidSaveTextDocument handler in vscode-extension/src/extension.ts line 122

### 16. VSCode extension: status bar (Phase 16)
expected: Status bar shows "$(sync~spin) Verifying...", "$(check) Verified (N/M)", or "$(x) N failures".
result: pass
evidence: showVerifying(), showSuccess(), showFailure() in statusBar.ts with correct icon strings

### 17. VSCode extension: structured output panel (Phase 16)
expected: "Rust FV: Failures" output panel shows organized failure reports.
result: pass
evidence: createOutputChannel('Rust FV: Failures') in outputPanel.ts; updateStructuredOutput() implemented

### 18. VSCode extension: SMT-LIB viewer (Phase 16)
expected: rust-fv.showSmtLib command opens most recent .smt2 file from target/verify/.
result: pass
evidence: showSmtLib() in outputPanel.ts scans target/verify/*.smt2 by mtime; registered as command

### 19. VSCode extension: gutter checkmarks (Phase 16)
expected: Verified functions display green checkmark icons in gutter, persist across tab switches.
result: pass
evidence: createTextEditorDecorationType({ gutterIconPath }) in gutterDecorations.ts; persists via lastVerificationReport

### 20. --message-format=json output (Phase 17)
expected: `cargo verify --message-format=json` outputs rustc-compatible JSON diagnostics.
result: pass
evidence: message_format.as_deref() == Some("json") dispatch to rustc_json::emit_rustc_diagnostics() in cargo_verify.rs

### 21. rust-analyzer auto-configuration (Phase 17)
expected: Extension configures rust-analyzer.check.overrideCommand automatically.
result: pass
evidence: raMode.ts defines VerificationMode.RustAnalyzer = 'rust-analyzer'; config.ts reads rust-analyzer.rustfv namespace

### 22. No duplicate squiggles in RA mode (Phase 17)
expected: Standalone on-save handler disabled when RA mode active.
result: pass
evidence: extension.ts line 121: "if (getCurrentMode() !== VerificationMode.RustAnalyzer)" guards standalone handler registration

### 23. --bv2int flag activates optimization (Phase 18)
expected: `cargo verify --bv2int` activates integer encoding for eligible functions.
result: pass
evidence: parse_bv2int_flag() in cargo_verify.rs; 38 bv2int tests pass in analysis crate

### 24. RUST_FV_BV2INT env var works (Phase 18)
expected: `RUST_FV_BV2INT=1 cargo verify` activates bv2int; CLI flag takes precedence.
result: pass
evidence: std::env::var("RUST_FV_BV2INT") in callbacks.rs; CLI precedence logic confirmed

### 25. --bv2int-report shows timing table (Phase 18)
expected: Shows per-function bitvector vs bv2int timing comparison.
result: pass
evidence: format_bv2int_timing() + print_bv2int_report() in output.rs; parse_bv2int_report_flag() in cargo_verify.rs

### 26. Slowdown warning when bv2int is slower (Phase 18)
expected: Warning when bv2int >2.0x slower; threshold configurable with --bv2int-threshold.
result: pass
evidence: check_slowdown_warning() in output.rs; RUST_FV_BV2INT_THRESHOLD env var supported

### 27. #[fv::no_bv2int] opt-out attribute (Phase 18)
expected: Functions annotated with #[fv::no_bv2int] excluded from bv2int encoding.
result: pass
evidence: has_no_bv2int_attribute() check in analysis/src/bv2int.rs; OptOut ineligibility variant

### 28. Ineligible function diagnostic (Phase 18)
expected: Functions with bitwise ops show V003 warning explaining bv2int ineligibility.
result: pass
evidence: "warning[V003]: function `{}` not eligible for bv2int" in diagnostics.rs; all bitwise ineligibility tests pass

## Summary

total: 28
passed: 28
issues: 0
pending: 0
skipped: 0

## Gaps

[none]

## Notes

**Pre-existing issue (tech debt):** 26 doc tests fail in `crates/analysis/src/stdlib_contracts/vec.rs`
due to `self` parameter in doc comment examples not being valid in free-function context.
Documented in PROJECT.md as known tech debt. All 1,613 lib tests pass; doc tests excluded from
normal `cargo test --lib` runs.

**Unstaged changes in solver crate:** `crates/solver/src/{backend,config,error,solver}.rs` contain
in-progress work for multiple-solver support (Z3/CVC5/Yices). The `Z3Solver` struct is being
renamed to `CliSolver` with a `SolverKind` enum. These changes are not committed and need to
either be completed or staged.
